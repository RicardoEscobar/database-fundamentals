<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Database fundamentals</title>
    <link type="text/css" href="../css/styles.css" rel="Stylesheet" />
    <link type="text/css" href="../css/kf8.css" media="amzn-kf8" rel="Stylesheet" />
    <link type="text/css" href="../css/mobi.css" media="amzn-mobi" rel="Stylesheet" />
</head>

<body>

    <h1>Database fundamentals</h1>

    <p class="null_text_indent"><span class="dropcaps2">A</span> database is build from tables. A database without tables is useless, not only there is no data, but there is no place to put data in. This is a <span class="key">tutorial</span> chapter, which means that you'll touch a lot of subjects on the surface and not deep enough, to avoid confusion, just assume that this is more like a guided tour of the basics, I don't expect that you understand everything on this chapter, but I hope to give you a wide view of what the job asks from you. And for you to see what the database business is about.</p>

    <p>I'm using <span class="key">MariaDB</span> as the database engine, some of these examples may differ depending on the database engine or the version. The source code on this book should work the same in <span class="key">MySQl</span>, most of the exercises are done in <span class="key">standard SQL</span> which means that you can use the source code as is, in standard SQL database engines.</p>

    <p>The installation of a specific database engine is outside the scope of this book, however here is a YouTube video that I recorded with installation instructions to install <span class="key">MariaDB</span> on <span class="key"></span>Windows 10. You don't have to open that link on your eReader but you are welcome to try.</p>

    <a href="https://youtu.be/s39ENZ9mLmA">YouTube: How to install MariaDB on Windows 10.</a>

    <p>There are plenty of tutorial and videos on whatever database engine you decide to use. This book is written as a guide for SQL databases and most examples are done using standard SQL in order to allow you to use this knowledge on whatever database engine you use.</p>

    <p>I'm assuming that you already installed a database engine and that you can actually run queries on it.</p>

    <p>Before creating a table and making queries, you need to create an actual database. For this chapter, we are creating a database for a human resources department. Most of the time, you'll receive a document called <span class="key">technical requirements</span> this document may say something like this:</p>

    <center><p class="text_border null_text_indent" style="font-style: italic;">&quot;The company requires to store information about it's employees and departments. We need to store their names, hire dates and the department they belong to...&quot;</p></center>

    <p>During this first chapter you'll learn what most programmers know, regarding database design and modeling. The good news is that after reading this, you are pretty much in line with what most people already know about databases, the bad news is that this knowledge is incomplete and leads to a painful path. Believe it or not, this is what most people work with:</p>

    <ul>
        <li>Creating a database.</li>
        <li>Create a table.</li>
        <li>Inserting data.</li>
        <li>Selecting data.</li>
        <li>Updating data.</li>
        <li>Deleting data.</li>
        <li>Drop table.</li>
    </ul>

    <h2 id="create-database">Creating a database</h2>

    <p>To create a database you need to run this command on the database engine:</p>

    <center class="exampleBorder">
        <code>
            <b>CREATE DATABASE</b> human_resources;
        </code>
    </center>

    <p>You can replace &quot;human_resources&quot; with whatever database name you want. The naming conventions I use are <span class="key">snake_case</span> where all words are lower cased and I use underscore instead of spaces. I don't type &quot;human_resources_database&quot; because it's implied that all databases are just that, databases. So I don't need to write the word database on every database I create.</p>

    <p>If recommend that you save these commands into a text file for easy replication. Text files with SQL queries are called scripts. You can name your scripts with the SQL extension to allow your file system to locate the recommended software to use in order to open these files.</p>

    <p>Example SQL script names:</p>

    <ul>
        <li>script.sql</li>
        <li>human_resources_script.sql</li>
        <li>human_resources.sql</li>
    </ul>

    <p>Whatever naming conventions you use, just remember to be consistent.</p>

    <p>If you try to execute the same command again, the database engine may tell you that there was an <span class="key">Error: The human_resources database already exists.</span></p>

    <p>While learning, it's common that you'll need to recreate your databases from scratch or create them using a SQL script file. In order to delete (drop) the human_resources database and create it anew, use this command:</p>

    <center class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE DATABASE</b> human_resources;
        </code>
    </center>

    <p>This command will create the &quot;human_resources&quot; database, if it already exist, it will delete it and create a new one without any tables or data.</p>

    <p>The database you just created is empty, there is no data and there is no place to put the data into. In order to put data into a database we need to create tables, inside that database. Before doing anything else, we need to open the database in order to execute more queries (instructions for the database engine to execute).</p>

    <p>To open the &quot;human_resources&quot; database, execute this command:</p>

    <center class="exampleBorder">
        <code>
            <b>USE</b> human_resources;
        </code>
    </center>

    <p>Now you can execute queries upon the &quot;human_resources&quot; database. Next we need to create a place to put data into, let's create a table.</p>

    <h2 id="create-table">Create a table</h2>

    <p>If we recall the requirements for this database, we get this:</p>

    <center><p class="text_border null_text_indent" style="font-style: italic;">&quot;The company requires to store information about it's employees and departments. We need to store their names, hire dates and the department they belong to...&quot;</p></center>

    <p>With so little information be sure that whatever design you do at this time, it's going to get changed in the future, don't feel mad or frustrated, that's just how it is. But we are going to be working to get to the best version of the database as soon as possible.</p>

    <p>The first thing to identify is the actual requirements to meet. After reading the requirements you can see that the database should be able to store these data:</p>

    <ul>
        <li>Employee name.</li>
        <li>Employee hire date.</li>
        <li>Employee's department.</li>
    </ul>

    <p>A word that we read here a lot in there it's <span class="key">employee</span>. So It's natural that our table name is just that: &quot;employee&quot;, I name tables in singular not plural and I use the <span class="key">camelCase</span>, naming convention. That means that the first letter of the name is lower case and instead of space, I join all the words and make a separation using a upper case letter, for example: firstName, employeeNorthOffice, employeeSalary, etc.</p>

    <p>Our table's name it's &quot;employee&quot;</p>

    <p>Next we need to add fields to insert our data into, my first proposal would be these fields:</p>

    <ul>
        <li>name</li>
        <li>hireDate</li>
        <li>department</li>
    </ul>

    <p>Simple. Yet in the case of people's names, it's often required to store them in two fields: <span class="key">first name</span> and <span class="key">last name</span>, this allows you to search employees by last name or first name, also allows you to order these records using last names, quite useful on a lot of circumstances. So the proposed table fields would end like this:</p>

    <ul>
        <li>firstName</li>
        <li>lastName</li>
        <li>hireDate</li>
        <li>department</li>
    </ul>

    <p>Fields on a table must be declared of a certain <span class="key">data type</span>, on databases, data types are used to impose rules and restrictions on the data to be stored. Depending of the type of data to be stored, you should chose a field data type.</p>

    <p>For example, for the <span class="key">firstName</span> and <span class="key">lastName</span> fields we may use <span class="key">varchar</span> data type, this is the data type used for text data, for the <span class="key">hireDate</span> we may use a <span class="key">date</span> data type. Notice that in the case of varchar, we may need to define how many characters are we allowed to store on that single field. Here is a list of the data types that we are going to use on this table on MariaDB:</p>

    <ul>
        <li><b>INTEGER, INT.</b> Saves an integer number, no decimal point.</li>
        <li><b>VARCHAR,</b> Saves a text field, must declare the maximum amount of characters allowed. Ex. VARCHAR(30)</li>
        <li><b>DATE,</b> Stores a date data type, useful for saving dates and do date related operations and queries.</li>
    </ul>

    <p>For a detailed list of the data types supported by MariaDB visit: <a href="https://mariadb.com/kb/en/library/data-types/">Data Types - MariaDB Knowledge Base</a></p>

    <p>If you are using another database engine, please look for your database documentation on the Internet.</p>

    <p>In our case, our employee table would have these fields:</p>

    <ul>
        <li>firstName, VARCHAR(30)</li>
        <li>lastName, VARCHAR(30)</li>
        <li>hireDate, DATE</li>
        <li>department, VARCHAR(60)</li>
    </ul>

    <p>So were does INTEGER come into play? We missed an important field that does not come defined in the technical requirements, that's the concept of the <span class="key">primary key</span>. A primary key, also called a primary keyword, is a key in a relational database that is unique for each record. This value helps identifying a single record as unique on the entire table. In our case, we will create a primary key of type INTEGER. Since this field is artificial, which means that it's not part of the actual data required.</p>

    <p>So we create a field called <span class="key">employeeID</span> this field will store an INTEGER number and it will be auto incremented field, this means that the number it's introduced by the database engine itself in order to avoid duplication and ensure the value it's unique for the entire table.</p>

    <p>So we end up with this list of fields for the employee table:</p>

    <ul>
        <li>employeeID, INTEGER</li>
        <li>firstName, VARCHAR(30)</li>
        <li>lastName, VARCHAR(30)</li>
        <li>hireDate, DATE</li>
        <li>department, VARCHAR(60)</li>
    </ul>

    <p>To visualize the <span class="key">employee table</span>, we may represent it like a spreadsheet:</p>

    <img  class="mobicontent" src="../images/table/employee_table_01.PNG" width="1009" height="441"/>
    <table class="defaultcontent table_group">
        <tr>
            <th class="column_name"><span style="font-weight:700">employeeID</span><br><span
                style="font-weight:700">INT, Primary key</span></th>
            <th class="column_name"><span style="font-weight:700">firstName</span><br><span
                    style="font-weight:700">VARCHAR(30)</span></th>
            <th class="column_name"><span style="font-weight:700">lastName</span><br><span
                    style="font-weight:700">VARCHAR(30)</span></th>
            <th class="column_name"><span style="font-weight:700">hireDate</span><br><span
                    style="font-weight:700">DATE</span></th>
            <th class="column_name"><span style="font-weight:700">department</span><br><span
                style="font-weight:700">VARCHAR(60)</span></th>
        </tr>
        <tr>
            <td class="table_data">1</td>
            <td class="table_data">Josh</td>
            <td class="table_data">Smith</td>
            <td class="table_data">1/5/2019</td>
            <td class="table_data">Accounting</td>
        </tr>
        <tr>
            <td class="table_data">2</td>
            <td class="table_data">Adam</td>
            <td class="table_data">Black</td>
            <td class="table_data">23/7/2018</td>
            <td class="table_data">Human resources</td>
        </tr>
        <tr>
            <td class="table_data">3</td>
            <td class="table_data">Jessica</td>
            <td class="table_data">White</td>
            <td class="table_data">1/9/2015</td>
            <td class="table_data">Accounting</td>
        </tr>
        <tr>
            <td class="table_data">4</td>
            <td class="table_data">James</td>
            <td class="table_data">Stuart</td>
            <td class="table_data">20/3/2017</td>
            <td class="table_data">Sales</td>
        </tr>
        <tr>
                <td class="table_data">5</td>
                <td class="table_data">Jessica</td>
                <td class="table_data">White</td>
                <td class="table_data">27/10/2019</td>
                <td class="table_data">Sales</td>
        </tr>
    </table>

    <p>So after all, it's time to actually code the table in SQL. Let's see the command to create the employee table then examine it to understand the details.</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;employeeID <b>INTEGER NOT NULL AUTO_INCREMENT,</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;firstName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;lastName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;hireDate <b>DATE</b>,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;department <b>VARCHAR(60)</b>,<br>
            <b>CONSTRAINT</b> employee_pk <b>PRIMARY KEY (</b>employeeID<b>));</b><br>
        </code>
    </div>

    <p>Now that's a mouthful. Lets divide and conquer this query by focusing on the first line:</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;<i>-- Code elided for clarity...</i><br>
        </code>
    </div>

    <p>Similar to <b>CREATE OR REPLACE DATABASE</b>, we create the employee table and if it already exists, we replace it with a new version of it.</p>

    <p><b>WARNING: Be careful, this will delete the entire table and all it's data.</b></p>

    <p>Next we create the actual fields of the employee table, the first and more important is the <span class="key">primary key</span> we define it like this:</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;employeeID <b>INTEGER NOT NULL AUTO_INCREMENT,</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;<i>-- Code elided for clarity...</i><br>
        </code>
    </div>

    <p>The second line creates the <b>employeeID</b> field, the <b>INTEGER</b> keyword means that the field it's an integer number, <b>NOT NULL</b> means that this field may never be empty (NULL) when inserting or updating a record, it must always have a valid value, <b>AUTO_INCREMENT</b> means that if there is no value set for the new record or during and update for the record, the database engine will provide a valid auto numeric value to the field. This means that you just don't need to add a value to this field during an insert or update operation, the database engine already knows what to do. We'll see this in action on the next section.</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;employeeID <b>INTEGER NOT NULL AUTO_INCREMENT,</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;firstName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;lastName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;hireDate <b>DATE</b>,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;department <b>VARCHAR(60)</b>,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;<i>-- Code elided for clarity...</i><br>
        </code>
    </div>

    <p>In a similar fashion, we add the fields that are actually required: <b>firstName, lastName, hireDate</b> and <b>department</b>. These fields have their data types defined after their names, remember to follow these field declarations with a coma (,) in order to separate the fields from one another and avoid execution errors.</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;employeeID <b>INTEGER NOT NULL AUTO_INCREMENT,</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;<i>-- Code elided for clarity...</i><br>
            <b>CONSTRAINT</b> employee_pk <b>PRIMARY KEY (</b>employeeID<b>));</b><br>
        </code>
    </div>

    <p>Finally the last line defines the <b>CONSTRAINT</b> for the primary key. All primary keys are indexed, this means that a space in the database is dedicated to store not just the primary key itself, but the actual record in a index table that allows the database to locate an specific record quickly using the <b>employeeID</b> field as reference. We'll take a deep look at indexes in the future.</p>

    <p>The <b>employee_pk</b> keyword stands for &quot;employee primary key&quot; this is a unique name for this specific index in the entire database.</p>

    <p>The <b>PRIMARY KEY (</b>employeeID<b>));</b> code is used to select which field is to be taken into consideration as the primary key, in this case that's <b>employeeID</b>. This must be considered as part of the primary key, just as the field definition on line two.</p>

    <p>Finally we review the code for creating the <b>employee</b> table.</p>

    <div class="exampleBorder">
        <code>
            <b>CREATE OR REPLACE TABLE </b>employee (<br>
            &nbsp;&nbsp;&nbsp;&nbsp;employeeID <b>INTEGER NOT NULL AUTO_INCREMENT,</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;firstName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;lastName <b>VARCHAR(30),</b><br>
            &nbsp;&nbsp;&nbsp;&nbsp;hireDate <b>DATE</b>,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;department <b>VARCHAR(60)</b>,<br>
            <b>CONSTRAINT</b> employee_pk <b>PRIMARY KEY (</b>employeeID<b>));</b><br>
        </code>
    </div>

    <p>Note that there is no data on the <b>employee</b> table yet, we only created an empty table to be able to store the data into. Next we'll populate our table with actual data.</p>

    <p>This was the hard part, create the database, then create a table. Working with data is 90% of the job, and it's the easiest part of the job. Most database administrators don't spend their time designing and modeling databases, these were created long ago most of the time and you just need to focus on getting data from the database and presenting information in a meaningful manner.</p>

    <h2 id="inserting-data">Inserting data</h2>

    <p>Now that you have the where to put data into, let's just do that. Data is inserted in the employee table in a <span class="key">record</span>.</p>
    
    <p>A record in a database is an object that can contain one more values. Groups of records are then saved in a table; the table defines the data that each record may contain. In a given database, there are multiple tables, each containing multiple records. Think of the rows and columns of a typical spreadsheet.<sup><a id="source-1-1" href="footnotes.html#footnote-1-1" epub:type="noteref">1</a></sup></p>

    <p class="null_text_indent">Lets insert a new employee:</p>

    <ul>
        <li><b>Name:</b> Jessica White</li>
        <li><b>Hire date:</b> 1/9/2015</li>
        <li><b>Department:</b> Accounting</li>
    </ul>

    <p class="null_text_indent">The employee table have these fields:</p>

    <ul>
        <li><b>employeeID:</b> int primary key, auto increment</li>
        <li><b>firstName:</b> varchar(30)</li>
        <li><b>lastName:</b> varchar(30)</li>
        <li><b>hireDate:</b> date</li>
        <li><b>department:</b> varchar(60)</li>
    </ul>

    <p class="null_text_indent">So the data for those fields should be these:</p>

    <ul>
        <li><b>employeeID:</b> NULL. This value is inserted automatically.</li>
        <li><b>firstName:</b> Jessica</li>
        <li><b>lastName:</b> White</li>
        <li><b>hireDate:</b> 1/9/2015</li>
        <li><b>department:</b> Accounting</li>
    </ul>

    <p class="null_text_indent">To insert Jessica White as a new employee at the employee table, execute this command:</p>

    <div class="exampleBorder" style="text-align: left;">
        <code>
            <b>INSERT INTO</b> employee <b>VALUES</b> (NULL, 'Jessica', 'White', '2019-04-01', 'Accounting');
        </code>
    </div>

    <p>This is the syntax to insert a new record when you already know the order of the fields on the employee table. If you read the values between the parenthesis, you'll realize that those values are in a proper order.</p>

    <p>The <b>NULL</b> keyword means that on the first field (employeeID) is not going to insert any value or it's unknown, the database engine will pick the next unused value from the AUTO_INCREMENT property and use that value instead of an actual NULL. Don't insert an actual value there unless you know what you are doing, just let the database engine do it's job.</p>

    <p>Sometimes you don't have all the values or some of the record's values are unknown, in this case we use the NULL keyword in order to tell the database engine that we don't know that value for the record.</p>

    <p>For example, assume we want to insert another employee, but this time we don't know what department he is going to be working for. So the department field is unknown. In this case we use this command:</p>

    <div class="exampleBorder" style="text-align: left;">
            <code>
                <b>INSERT INTO</b> employee <b>VALUES</b> (NULL, 'Walter', 'Jones', '2017-08-13', NULL);
            </code>
        </div>

    <p>In the future, you'll create fields that have the property <span class="key">NOT NULL</span> like the primary key, if a field is marked as NOT NULL, then you either insert the value yourself or the database engine may do so via AUTO_INCREMENT or by DEFAULT value.</p>

    <p><span class="key">DEFAULT</span> values, in the context of databases, are preset values defined for a column type. Default values are used when many records hold similar data.<sup><a id="source-1-2" href="footnotes.html#footnote-1-2" epub:type="noteref">2</a></sup></p>

    <h2 id="selecting-data">Selecting data</h2>

    <h2 id="updating-data">Updating data</h2>

    <h2 id="deleting-data">Deleting data</h2>

    <h2 id="drop-table">Drop a table</h2>

</body>

</html>